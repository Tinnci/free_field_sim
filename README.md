# 交互式房间声学仿真与可视化工具

本项目是一个基于 Python 的交互式房间声学仿真平台，集成了图形用户界面（GUI）、2D/3D 可视化、声源与麦克风参数化、仿真结果评估与配置管理等功能，适用于声学教学、科研与工程应用。

## 主要功能
- **房间声学仿真**：基于 [pyroomacoustics](https://github.com/LCAV/pyroomacoustics) 实现房间混响、声源信号传播与多麦克风接收。
- **图形用户界面（GUI）**：使用 PySide6 构建，支持参数设置、对象管理、仿真控制与结果展示。
- **3D 可视化**：集成 PyVista，实现房间、声源、麦克风的三维空间布局与交互。
- **2D 信号可视化**：嵌入 Matplotlib，展示房间冲激响应（RIR）、时域信号、频域信号（FFT）。
- **声源/麦克风参数化**：支持为每个声源和麦克风配置详细物理与信号参数。
- **仿真配置管理**：支持场景参数的保存与加载（JSON），便于复现与批量实验。
- **评估与扩展**：内置信号评估函数，便于后续扩展更多声学指标。

## 依赖环境
- Python 3.8+
- PySide6
- pyroomacoustics
- numpy
- scipy
- matplotlib
- pyvista
- pyvistaqt

建议使用虚拟环境（如 venv、conda、pdm）管理依赖。

## 目录结构
```
free_field_sim/
  src/
    gui/                # GUI 主窗口与控件
    simulation.py       # 仿真核心（声源、麦克风、仿真函数）
    visualization.py    # 2D 可视化（Matplotlib）
    visualization3d.py  # 3D 可视化（PyVista）
    evaluation.py       # 仿真结果评估
  hello.py              # 主入口脚本
  pyproject.toml        # 依赖与构建配置
  README.md             # 项目说明
```

## 快速开始
1. 安装依赖：
   ```bash
   uv sync
   # 或使用 pip/pyproject.toml/pdm/poetry 等工具
   ```
2. 运行主程序：
   ```bash
   python hello.py
   ```
3. 在 GUI 中设置房间、声源、麦克风参数，点击"运行仿真与更新绘图"查看结果。

## 主要用法说明
- **添加/编辑声源**：可设置名称、位置、信号类型（正弦波组合、白噪声、脉冲）及参数。
- **添加/编辑麦克风**：可设置名称、位置、灵敏度、自噪声、频响类型及参数。
- **3D 视图交互**：支持旋转、缩放、拾取对象，显示详细信息。
- **配置管理**：通过"保存配置/加载配置"按钮，管理仿真场景参数。
- **结果展示**：RIR、时域、频域信号均可在不同标签页中查看。

## 未来发展方向
- 支持多声源信号同时仿真与混合。
- 3D 声场分布、波前动画等高级可视化。
- 更丰富的评估指标与批量仿真。
- 增强输入校验与用户体验。
- 完善文档与示例。

---

如需详细开发路线、模块说明或贡献指南，请参阅 `src/` 目录下各模块代码与注释，或查阅项目内置的开发规则文档。
